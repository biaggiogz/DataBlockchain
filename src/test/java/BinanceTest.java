import com.fasterxml.jackson.core.JsonFactory;
import com.fasterxml.jackson.core.JsonParseException;
import com.fasterxml.jackson.core.JsonParser;
import com.fasterxml.jackson.core.JsonToken;
import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.apache.tomcat.util.json.JSONParser;

import org.json.JSONObject;
import org.junit.jupiter.api.Test;

import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.io.Reader;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;

import static org.junit.jupiter.api.Assertions.assertNotNull;

public class BinanceTest {


    @Test
    public void givenUsingLowLevelApi_whenParsingJsonStringIntoJsonNode_thenCorrect()
            throws JsonParseException, IOException {
//        String input = "{\"lastUpdateId\":692213285,\"bids\":[[\"0.94200000\",\"569.20000000\"],[\"0.94100000\",\"2214.90000000\"],[\"0.94000000\",\"2351.40000000\"],[\"0.93900000\",\"4668.80000000\"],[\"0.93800000\",\"6393.60000000\"],[\"0.93700000\",\"8377.70000000\"],[\"0.93600000\",\"2038.50000000\"],[\"0.93500000\",\"2231.90000000\"],[\"0.93400000\",\"4784.60000000\"],[\"0.93300000\",\"9450.40000000\"],[\"0.93200000\",\"1364.70000000\"],[\"0.93100000\",\"2000.30000000\"],[\"0.93000000\",\"7179.80000000\"],[\"0.92900000\",\"5607.20000000\"],[\"0.92800000\",\"8001.30000000\"],[\"0.92700000\",\"4170.80000000\"],[\"0.92600000\",\"867.20000000\"],[\"0.92500000\",\"7082.00000000\"],[\"0.92400000\",\"2216.20000000\"],[\"0.92300000\",\"1839.60000000\"],[\"0.92200000\",\"4658.20000000\"],[\"0.92100000\",\"7906.60000000\"],[\"0.92000000\",\"8125.10000000\"],[\"0.91900000\",\"4025.60000000\"],[\"0.91800000\",\"320.50000000\"],[\"0.91700000\",\"5429.40000000\"],[\"0.91600000\",\"7914.00000000\"],[\"0.91500000\",\"11212.40000000\"],[\"0.91400000\",\"1309.00000000\"],[\"0.91300000\",\"4141.50000000\"],[\"0.91200000\",\"1406.50000000\"],[\"0.91100000\",\"202.40000000\"],[\"0.91000000\",\"185.00000000\"],[\"0.90900000\",\"6758.00000000\"],[\"0.90800000\",\"6135.70000000\"],[\"0.90700000\",\"8784.80000000\"],[\"0.90600000\",\"16496.90000000\"],[\"0.90500000\",\"880.00000000\"],[\"0.90400000\",\"27568.70000000\"],[\"0.90300000\",\"413.00000000\"],[\"0.90200000\",\"15271.70000000\"],[\"0.90100000\",\"6249.60000000\"],[\"0.90000000\",\"5011.20000000\"],[\"0.89900000\",\"831.50000000\"],[\"0.89800000\",\"7951.80000000\"],[\"0.89700000\",\"8646.60000000\"],[\"0.89600000\",\"8123.60000000\"],[\"0.89500000\",\"1894.90000000\"],[\"0.89400000\",\"2430.20000000\"],[\"0.89300000\",\"2336.50000000\"],[\"0.89200000\",\"107.70000000\"],[\"0.89100000\",\"1869.80000000\"],[\"0.89000000\",\"26.90000000\"],[\"0.88900000\",\"192.90000000\"],[\"0.88800000\",\"1004.40000000\"],[\"0.88700000\",\"948.80000000\"],[\"0.88600000\",\"664.20000000\"],[\"0.88500000\",\"1407.80000000\"],[\"0.88400000\",\"264.10000000\"],[\"0.88300000\",\"1117.60000000\"],[\"0.88200000\",\"2065.00000000\"],[\"0.88100000\",\"11121.70000000\"],[\"0.88000000\",\"15517.60000000\"],[\"0.87900000\",\"92.20000000\"],[\"0.87800000\",\"50.90000000\"],[\"0.87700000\",\"990.60000000\"],[\"0.87600000\",\"750.90000000\"],[\"0.87500000\",\"3584.00000000\"],[\"0.87400000\",\"104.20000000\"],[\"0.87300000\",\"1538.30000000\"],[\"0.87200000\",\"716.10000000\"],[\"0.87100000\",\"63.00000000\"],[\"0.87000000\",\"998.90000000\"],[\"0.86900000\",\"28.20000000\"],[\"0.86800000\",\"89.70000000\"],[\"0.86700000\",\"935.30000000\"],[\"0.86600000\",\"1207.00000000\"],[\"0.86500000\",\"2410.40000000\"],[\"0.86400000\",\"55.40000000\"],[\"0.86300000\",\"131.70000000\"],[\"0.86200000\",\"198.40000000\"],[\"0.86100000\",\"954.10000000\"],[\"0.86000000\",\"1179.80000000\"],[\"0.85900000\",\"137.70000000\"],[\"0.85800000\",\"58.10000000\"],[\"0.85700000\",\"498.30000000\"],[\"0.85600000\",\"1553.50000000\"],[\"0.85500000\",\"11.70000000\"],[\"0.85400000\",\"87.30000000\"],[\"0.85300000\",\"96.50000000\"],[\"0.85200000\",\"948.50000000\"],[\"0.85100000\",\"4671.20000000\"],[\"0.85000000\",\"3235.80000000\"],[\"0.84900000\",\"62.40000000\"],[\"0.84800000\",\"177.90000000\"],[\"0.84700000\",\"359.90000000\"],[\"0.84600000\",\"40.40000000\"],[\"0.84500000\",\"23.60000000\"],[\"0.84400000\",\"95.70000000\"],[\"0.84300000\",\"63.40000000\"],[\"0.84200000\",\"485.50000000\"],[\"0.84100000\",\"56.70000000\"],[\"0.84000000\",\"1766.90000000\"],[\"0.83900000\",\"673.10000000\"],[\"0.83800000\",\"879.90000000\"],[\"0.83700000\",\"56.60000000\"],[\"0.83600000\",\"102.50000000\"],[\"0.83500000\",\"952.20000000\"],[\"0.83400000\",\"110.20000000\"],[\"0.83300000\",\"79.30000000\"],[\"0.83200000\",\"1175.30000000\"],[\"0.83100000\",\"244.40000000\"],[\"0.83000000\",\"451.30000000\"],[\"0.82900000\",\"497.50000000\"],[\"0.82800000\",\"665.60000000\"],[\"0.82700000\",\"47.60000000\"],[\"0.82600000\",\"69.80000000\"],[\"0.82500000\",\"1161.00000000\"],[\"0.82300000\",\"116.70000000\"],[\"0.82200000\",\"73.40000000\"],[\"0.82100000\",\"271.20000000\"],[\"0.82000000\",\"6008.20000000\"],[\"0.81900000\",\"72.50000000\"],[\"0.81800000\",\"147.10000000\"],[\"0.81700000\",\"70.60000000\"],[\"0.81600000\",\"140.80000000\"],[\"0.81500000\",\"3081.90000000\"],[\"0.81300000\",\"149.10000000\"],[\"0.81200000\",\"742.90000000\"],[\"0.81100000\",\"859.70000000\"],[\"0.81000000\",\"4704.10000000\"],[\"0.80900000\",\"162.40000000\"],[\"0.80700000\",\"55.30000000\"],[\"0.80500000\",\"15664.50000000\"],[\"0.80400000\",\"644.60000000\"],[\"0.80300000\",\"30.50000000\"],[\"0.80200000\",\"1154.20000000\"],[\"0.80100000\",\"231.40000000\"],[\"0.80000000\",\"11057.10000000\"],[\"0.79900000\",\"88.80000000\"],[\"0.79800000\",\"49.00000000\"],[\"0.79700000\",\"90.30000000\"],[\"0.79600000\",\"67.30000000\"],[\"0.79500000\",\"30.80000000\"],[\"0.79400000\",\"31.40000000\"],[\"0.79300000\",\"98.20000000\"],[\"0.79200000\",\"163.40000000\"],[\"0.79100000\",\"256.30000000\"],[\"0.79000000\",\"2506.80000000\"],[\"0.78900000\",\"31762.30000000\"],[\"0.78700000\",\"90.10000000\"],[\"0.78600000\",\"49.50000000\"],[\"0.78500000\",\"1112.60000000\"],[\"0.78400000\",\"25.70000000\"],[\"0.78300000\",\"90.80000000\"],[\"0.78100000\",\"104.90000000\"],[\"0.78000000\",\"2459.10000000\"],[\"0.77900000\",\"57.30000000\"],[\"0.77800000\",\"32302.30000000\"],[\"0.77700000\",\"11072.30000000\"],[\"0.77600000\",\"302.80000000\"],[\"0.77500000\",\"710.00000000\"],[\"0.77400000\",\"50.00000000\"],[\"0.77300000\",\"434.80000000\"],[\"0.77200000\",\"1134.90000000\"],[\"0.77100000\",\"18.00000000\"],[\"0.77000000\",\"47310.70000000\"],[\"0.76900000\",\"446.30000000\"],[\"0.76800000\",\"48.70000000\"],[\"0.76700000\",\"336.30000000\"],[\"0.76600000\",\"35.60000000\"],[\"0.76500000\",\"43.30000000\"],[\"0.76400000\",\"96.60000000\"],[\"0.76200000\",\"170.70000000\"],[\"0.76100000\",\"234.30000000\"],[\"0.76000000\",\"6671.50000000\"],[\"0.75900000\",\"26.60000000\"],[\"0.75800000\",\"78.80000000\"],[\"0.75700000\",\"32.30000000\"],[\"0.75600000\",\"195.20000000\"],[\"0.75500000\",\"136.10000000\"],[\"0.75400000\",\"223.60000000\"],[\"0.75300000\",\"112.10000000\"],[\"0.75200000\",\"338.30000000\"],[\"0.75100000\",\"2491.20000000\"],[\"0.75000000\",\"6246.40000000\"],[\"0.74900000\",\"32.70000000\"],[\"0.74800000\",\"1548.40000000\"],[\"0.74700000\",\"141.10000000\"],[\"0.74500000\",\"311.80000000\"],[\"0.74400000\",\"53.40000000\"],[\"0.74300000\",\"76.40000000\"],[\"0.74200000\",\"279.60000000\"],[\"0.74100000\",\"788.40000000\"],[\"0.74000000\",\"1025.00000000\"],[\"0.73900000\",\"78.10000000\"],[\"0.73800000\",\"140.70000000\"],[\"0.73700000\",\"69.60000000\"],[\"0.73600000\",\"85.10000000\"],[\"0.73500000\",\"4344.50000000\"]],\"asks\":[[\"0.94300000\",\"787.10000000\"],[\"0.94500000\",\"1409.80000000\"],[\"0.94600000\",\"5137.90000000\"],[\"0.94700000\",\"2556.00000000\"],[\"0.94800000\",\"127.00000000\"],[\"0.94900000\",\"616.00000000\"],[\"0.95000000\",\"957.80000000\"],[\"0.95100000\",\"199.30000000\"],[\"0.95200000\",\"1713.40000000\"],[\"0.95300000\",\"3733.10000000\"],[\"0.95400000\",\"16.80000000\"],[\"0.95500000\",\"790.70000000\"],[\"0.95600000\",\"269.40000000\"],[\"0.95700000\",\"21.20000000\"],[\"0.95800000\",\"3568.00000000\"],[\"0.95900000\",\"83.90000000\"],[\"0.96000000\",\"315.20000000\"],[\"0.96100000\",\"337.60000000\"],[\"0.96200000\",\"449.40000000\"],[\"0.96300000\",\"241.00000000\"],[\"0.96400000\",\"12791.90000000\"],[\"0.96500000\",\"10952.60000000\"],[\"0.96600000\",\"16.80000000\"],[\"0.96700000\",\"76.10000000\"],[\"0.96900000\",\"48.10000000\"],[\"0.97000000\",\"1687.60000000\"],[\"0.97100000\",\"843.70000000\"],[\"0.97200000\",\"641.30000000\"],[\"0.97300000\",\"840.80000000\"],[\"0.97400000\",\"14906.20000000\"],[\"0.97500000\",\"3396.90000000\"],[\"0.97600000\",\"2886.30000000\"],[\"0.97700000\",\"169.80000000\"],[\"0.97800000\",\"16.80000000\"],[\"0.98000000\",\"334.00000000\"],[\"0.98100000\",\"311.30000000\"],[\"0.98200000\",\"62.40000000\"],[\"0.98300000\",\"22.20000000\"],[\"0.98400000\",\"41.80000000\"],[\"0.98500000\",\"3180.90000000\"],[\"0.98600000\",\"10.20000000\"],[\"0.98700000\",\"12129.40000000\"],[\"0.98800000\",\"2609.10000000\"],[\"0.98900000\",\"1200.60000000\"],[\"0.99000000\",\"26946.30000000\"],[\"0.99100000\",\"26.20000000\"],[\"0.99200000\",\"18545.90000000\"],[\"0.99300000\",\"59.70000000\"],[\"0.99400000\",\"91.70000000\"],[\"0.99500000\",\"4656.10000000\"],[\"0.99600000\",\"57.70000000\"],[\"0.99700000\",\"272.40000000\"],[\"0.99800000\",\"449.70000000\"],[\"0.99900000\",\"11190.30000000\"],[\"1.00000000\",\"148019.90000000\"],[\"1.00100000\",\"646.10000000\"],[\"1.00200000\",\"52.10000000\"],[\"1.00300000\",\"111.10000000\"],[\"1.00400000\",\"1814.20000000\"],[\"1.00500000\",\"398.50000000\"],[\"1.00600000\",\"41.80000000\"],[\"1.00700000\",\"94.70000000\"],[\"1.00800000\",\"2547.90000000\"],[\"1.01000000\",\"6904.80000000\"],[\"1.01100000\",\"18.00000000\"],[\"1.01200000\",\"36.90000000\"],[\"1.01300000\",\"55.60000000\"],[\"1.01400000\",\"29.70000000\"],[\"1.01500000\",\"80.00000000\"],[\"1.01600000\",\"1805.40000000\"],[\"1.01700000\",\"6601.00000000\"],[\"1.01900000\",\"138.90000000\"],[\"1.02000000\",\"9259.30000000\"],[\"1.02100000\",\"2583.20000000\"],[\"1.02200000\",\"582.10000000\"],[\"1.02300000\",\"47.40000000\"],[\"1.02400000\",\"162.10000000\"],[\"1.02500000\",\"962.50000000\"],[\"1.02600000\",\"37.10000000\"],[\"1.02700000\",\"93.30000000\"],[\"1.02800000\",\"686.90000000\"],[\"1.02900000\",\"83.70000000\"],[\"1.03000000\",\"29481.10000000\"],[\"1.03100000\",\"458.20000000\"],[\"1.03200000\",\"958.40000000\"],[\"1.03300000\",\"574.40000000\"],[\"1.03400000\",\"282.80000000\"],[\"1.03500000\",\"120.30000000\"],[\"1.03600000\",\"510.50000000\"],[\"1.03700000\",\"434.00000000\"],[\"1.03800000\",\"88.60000000\"],[\"1.03900000\",\"549.30000000\"],[\"1.04000000\",\"455.70000000\"],[\"1.04100000\",\"58.40000000\"],[\"1.04200000\",\"324.00000000\"],[\"1.04300000\",\"98.20000000\"],[\"1.04400000\",\"32.10000000\"],[\"1.04500000\",\"1943.30000000\"],[\"1.04600000\",\"54.00000000\"],[\"1.04700000\",\"49.00000000\"],[\"1.04800000\",\"711.70000000\"],[\"1.04900000\",\"169.10000000\"],[\"1.05000000\",\"49574.40000000\"],[\"1.05100000\",\"582.60000000\"],[\"1.05200000\",\"246.90000000\"],[\"1.05300000\",\"230.40000000\"],[\"1.05400000\",\"292.20000000\"],[\"1.05500000\",\"17569.60000000\"],[\"1.05600000\",\"71.90000000\"],[\"1.05700000\",\"88.00000000\"],[\"1.05800000\",\"4281.00000000\"],[\"1.05900000\",\"4486.20000000\"],[\"1.06000000\",\"16020.80000000\"],[\"1.06100000\",\"431.10000000\"],[\"1.06200000\",\"74.00000000\"],[\"1.06300000\",\"496.50000000\"],[\"1.06400000\",\"16.90000000\"],[\"1.06500000\",\"276.90000000\"],[\"1.06600000\",\"116.60000000\"],[\"1.06700000\",\"328.70000000\"],[\"1.06800000\",\"507.70000000\"],[\"1.06900000\",\"1178.60000000\"],[\"1.07000000\",\"15877.30000000\"],[\"1.07100000\",\"23.00000000\"],[\"1.07200000\",\"2269.10000000\"],[\"1.07300000\",\"6688.90000000\"],[\"1.07400000\",\"872.70000000\"],[\"1.07500000\",\"1739.20000000\"],[\"1.07700000\",\"2345.80000000\"],[\"1.07800000\",\"118.20000000\"],[\"1.07900000\",\"48.90000000\"],[\"1.08000000\",\"8790.50000000\"],[\"1.08100000\",\"16.00000000\"],[\"1.08200000\",\"39.70000000\"],[\"1.08300000\",\"201.70000000\"],[\"1.08400000\",\"25.50000000\"],[\"1.08500000\",\"135.90000000\"],[\"1.08600000\",\"85.80000000\"],[\"1.08700000\",\"85.30000000\"],[\"1.08800000\",\"267.50000000\"],[\"1.08900000\",\"2961.50000000\"],[\"1.09000000\",\"5430.10000000\"],[\"1.09100000\",\"312.80000000\"],[\"1.09200000\",\"47.60000000\"],[\"1.09300000\",\"22.50000000\"],[\"1.09400000\",\"69.50000000\"],[\"1.09500000\",\"508.70000000\"],[\"1.09600000\",\"124.20000000\"],[\"1.09700000\",\"29257.00000000\"],[\"1.09800000\",\"2202.50000000\"],[\"1.09900000\",\"34.30000000\"],[\"1.10000000\",\"39553.00000000\"],[\"1.10100000\",\"320.20000000\"],[\"1.10200000\",\"10.20000000\"],[\"1.10300000\",\"749.10000000\"],[\"1.10400000\",\"77.30000000\"],[\"1.10500000\",\"277.20000000\"],[\"1.10600000\",\"86.90000000\"],[\"1.10700000\",\"102.30000000\"],[\"1.10900000\",\"75.50000000\"],[\"1.11000000\",\"56804.40000000\"],[\"1.11100000\",\"71.60000000\"],[\"1.11200000\",\"23.90000000\"],[\"1.11300000\",\"482.90000000\"],[\"1.11400000\",\"1062.50000000\"],[\"1.11500000\",\"25147.80000000\"],[\"1.11600000\",\"34.80000000\"],[\"1.11700000\",\"389.50000000\"],[\"1.11800000\",\"40.40000000\"],[\"1.11900000\",\"30.10000000\"],[\"1.12000000\",\"4540.50000000\"],[\"1.12100000\",\"415.30000000\"],[\"1.12200000\",\"437.70000000\"],[\"1.12300000\",\"580.80000000\"],[\"1.12400000\",\"82.70000000\"],[\"1.12500000\",\"2752.90000000\"],[\"1.12600000\",\"354.00000000\"],[\"1.12700000\",\"141.10000000\"],[\"1.12800000\",\"70.70000000\"],[\"1.12900000\",\"6151.70000000\"],[\"1.13000000\",\"1832.10000000\"],[\"1.13100000\",\"767.60000000\"],[\"1.13200000\",\"572.00000000\"],[\"1.13300000\",\"1697.10000000\"],[\"1.13400000\",\"131.70000000\"],[\"1.13500000\",\"27.00000000\"],[\"1.13600000\",\"3852.80000000\"],[\"1.13800000\",\"58.60000000\"],[\"1.13900000\",\"19585.00000000\"],[\"1.14000000\",\"22998.00000000\"],[\"1.14100000\",\"87.70000000\"],[\"1.14200000\",\"704.00000000\"],[\"1.14300000\",\"8.80000000\"],[\"1.14400000\",\"20.00000000\"],[\"1.14500000\",\"7755.70000000\"],[\"1.14600000\",\"382.30000000\"],[\"1.14700000\",\"470.80000000\"],[\"1.14800000\",\"977.10000000\"],[\"1.14900000\",\"924.20000000\"],[\"1.15000000\",\"37948.20000000\"]]}\n";
//
//        ObjectMapper mapper = new ObjectMapper();
//        mapper.writeValue(new File("src/main/resources/depth.json"), input);
//        JsonFactory factory = mapper.getFactory();
//        JsonParser parser = factory.createParser(input);
//        JsonNode actualObj = mapper.readTree(parser);
//        System.out.println(actualObj.toPrettyString());
//        assertNotNull(actualObj);
        File file=  new File("src/main/resources/coinmarketCap/tickerCoinmarketCap2022-10-23 14:56:20.961.js");
        JsonNode node = new ObjectMapper().readTree(file);

        JsonNode node3 = node.get("data").get("PHA").findValue("USD");
        System.out.println(node3.toString());



    }
}
